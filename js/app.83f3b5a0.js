!function(t){function e(e){for(var i,a,h=e[0],s=e[1],d=e[2],g=0,p=[];g<h.length;g++)a=h[g],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);for(u&&u(e);p.length;)p.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,h=1;h<n.length;h++){var s=n[h];0!==o[s]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={0:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var h=window.webpackJsonp=window.webpackJsonp||[],s=h.push.bind(h);h.push=e,h=h.slice();for(var d=0;d<h.length;d++)e(h[d]);var u=s;r.push([86,1]),n()}({54:function(t,e,n){t.exports=n.p+"build/src/images/flyingEnemy.png"},55:function(t,e,n){t.exports=n.p+"build/src/images/standingEnemy.png"},56:function(t,e,n){t.exports=n.p+"build/src/images/walkingEnemy.png"},57:function(t,e,n){t.exports=n.p+"build/src/images/smoke.png"},58:function(t,e,n){t.exports=n.p+"build/src/images/sky.png"},59:function(t,e,n){t.exports=n.p+"build/src/images/city.png"},60:function(t,e,n){t.exports=n.p+"build/src/images/player.png"},61:function(t,e,n){t.exports=n.p+"build/src/images/platform.png"},62:function(t,e,n){t.exports=n.p+"build/src/images/gun.png"},63:function(t,e,n){t.exports=n.p+"build/src/images/bullet.png"},64:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);n(64);var i,o={};function r(t,e){if(o[t])return o[t];var n=new Image;n.onload=function(){o[t]=n,a()&&"function"==typeof i&&i()},o[t]=!1,n.src=e}function a(){for(var t in o)if(o.hasOwnProperty(t)&&!o[t])return!1;return!0}var h={add:function(t){for(var e in t)t.hasOwnProperty(e)&&r(e,t[e])},get:function(t){return o[t]},onReady:function(t){i=t},isReady:a};n(31),n(41),n(43),n(47),n(48),n(50),n(29),n(51),n(52),n(53),n(19);function s(t,e,n){this.image=t,this.frameWidth=e,this.frameHeight=n,this.framesPerRow=Math.floor(this.image.width/this.frameWidth)}var d=function(t){var e=t.image,n=t.width,i=t.height,o=t.animationSpeed,r=void 0===o?1:o,a=t.scale,h=void 0===a?1:a,d=t.frameSequence,u=void 0===d?function(t,e,n){for(var i=Math.floor(t.width/e)*Math.floor(t.height/n),o=[],r=0;r<i;r++)o.push(r);return o}(e,n,i):d,g=new s(e,n,i),p=0;this.nextFrame=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;p=t<0?(p=Math.abs(p+t))>1?p:u.length-1:(p+t)%u.length},this.getFrame=function(){var t=Math.floor(p),n=Math.floor(u[t]/g.framesPerRow),i=Math.floor(u[t]%g.framesPerRow);return{image:e,sx:i*g.frameWidth,sy:n*g.frameHeight,sWidth:g.frameWidth,sHeight:g.frameHeight,dWidth:g.frameWidth*h,dHeight:g.frameHeight*h}}},u={},g={32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"};function p(t,e){var n=t.keyCode;u[g[n]||String.fromCharCode(n)]=e}window.addEventListener("blur",(function(){u={}})),document.addEventListener("keydown",(function(t){p(t,!0)})),document.addEventListener("keyup",(function(t){p(t,!1)}));var c,m,l,y=function(t){return u[t.toUpperCase()]},f=document.getElementById("canvas");function v(t,e){l=e}document.addEventListener("mousedown",(function(t){v(t,!0)})),document.addEventListener("mouseup",(function(t){v(t,!1)})),f.onmousemove=function(t){c=t.offsetX,m=t.offsetY};var w={get getPosX(){return c},get getPosY(){return m},get isClick(){return l}},b=(n(85),{playerJumpCount:15,playerAnimationSpeed:.4,playerMovingSpeed:6,playerHeight:100,playerWidth:73,bulletWidth:7,bulletHeight:6,bulletSpeed:40,shotInterval:500,enemyAppearanceInterval:2e3,enemyInParadiseSpeed:50,gravity:1,speed:1,gameAcceleration:.002,platformSpeed:2,platformWidth:100,platformHeight:100,skyBackgoundSpeed:.5,smokeBackgoundSpeed:.8,cityBackgoundSpeed:.3,standingEnemyHeight:53,standingEnemyWidth:50,standingEnemySpeed:2,flyingEnemyHeight:35,flyingEnemyWidth:120,flyingEnemySpeed:6,flyingEnemyAnimationSpeed:.2,walkingEnemyWidth:73,walkingEnemyHeight:100,walkingEnemySpeed:4,walkingEnemyAnimationSpeed:.3});function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.constructor===x)throw new Error("".concat(this.constructor.name,": can not create instance of abstract class"));this.image=t,this.x=e,this.y=n,this.dx=i,this.dy=o}x.prototype.move=function(){this.x+=this.dx*b.speed,this.y+=this.dy*b.speed},x.prototype.getMinDistance=function(t){var e,n,i,o=1/Math.max(Math.abs(this.dx),Math.abs(this.dy),Math.abs(t.dx),Math.abs(t.dy)),r={},a={},h=1/0;r.x=this.x+this.width/2,r.y=this.y+this.height/2,a.x=t.x+t.width/2,a.y=t.y+t.height/2;for(var s=0;s<1;s+=o)i=(e=r.x+this.dx*s-(a.x+t.dx*s))*e+(n=r.y+this.dy*s-(a.y+t.dy*s))*n,h=Math.min(h,i);return Math.sqrt(h)};var E=x;function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];E.apply(this,i),this.width=b.playerWidth,this.height=b.playerHeight,this.speed=b.speed*b.playerSpeed,this.animationSpeed=b.playerAnimationSpeed*b.speed,this.runAnimation=new d(this),this.jumpAnimation=new d(k(k({},this),{frameSequence:[6]})),this.fallAnimation=new d(k(k({},this),{frameSequence:[7]})),this.gravity=b.gravity,this.isJump=!1,this.animation=this.runAnimation,this._jumpCounter=0,this._jumpDy=-(b.playerJumpCount+this.gravity),this.gunImg=e,this.maxX=t,this.gun={angle:0,width:e.width,height:e.height,x:this.x+this.width-e.width,y:this.y+e.height+3}}function P(){this.gun.x=this.x+this.width-this.gunImg.width,this.gun.y=this.y+this.gunImg.height+3;var t=this.gun.x+this.gun.width/2,e=this.gun.y+this.gun.height/2;this.gun.angle=Math.atan2(w.getPosY-e,w.getPosX-t)}j.prototype=Object.create(E.prototype),j.prototype.constructor=j,j.prototype.move=function(){this.x+=this.dx*b.speed/3,this.y+=this.dy},j.prototype.update=function(){this.dx=0,this.animationSpeed=b.playerAnimationSpeed*b.speed/3,y("D")&&this.x<this.maxX-this.width&&(this.dx=b.playerMovingSpeed,this.animationSpeed=3*this.animationSpeed),y("A")&&this.x>0&&(this.dx=-b.playerMovingSpeed,this.animationSpeed=-this.animationSpeed),y("SPACE")&&0===this.dy&&!this.isJump&&(this.isJump=!0,this.dy=this._jumpDy,this._jumpCounter=b.playerJumpCount),y("SPACE")&&this._jumpCounter&&(this.dy=this._jumpDy),this._jumpCounter=Math.max(this._jumpCounter-1,0),this.move(),this.isJump&&(this.dy+=this.gravity),this.dy>0?this.animation=this.fallAnimation:this.dy<0?this.animation=this.jumpAnimation:this.animation=this.runAnimation,P.call(this),this.animation.nextFrame(this.animationSpeed)},j.prototype.getSprite=function(){return k(k({},{dx:this.x,dy:this.y,image:this.image}),this.animation.getFrame())},j.prototype.getGunSprite=function(){return{angle:this.gun.angle,dx:this.gun.x,dy:this.gun.y,image:this.gunImg,dWidth:this.gun.width,dHeight:this.gun.height}};var W=j;function M(t){arguments.length>3&&void 0!==arguments[3]||b.bulletSpeed,arguments.length>4&&void 0!==arguments[4]||b.bulletSpeed;var e=arguments.length>5?arguments[5]:void 0;E.apply(this,arguments),this.width=b.bulletWidth,this.height=b.bulletHeight,this.angle=e}M.prototype=Object.create(E.prototype),M.prototype.constructor=M,M.prototype.getSprite=function(){return{image:this.image,dx:this.x,dy:this.y,angle:this.angle}},M.prototype.update=function(){this.x+=this.dx,this.y+=this.dy};var H=M;function A(t){E.apply(this,arguments),this.width=b.platformWidth,this.height=b.platformHeight,this.dx=-b.platformSpeed}A.prototype=Object.create(E.prototype),A.prototype.constructor=A,A.prototype.getSprite=function(){return{image:this.image,dx:this.x,dy:this.y}},A.prototype.update=function(){this.move()};var I=A,C=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},D=function(t,e){var n=t+Math.random()*(e+1-t);return n=Math.floor(n)};var B=function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=document.createElement("canvas"),h=a.getContext("2d");a.width=e,a.height=t.height,this.image=a,this.dx=o,this.dy=r,this.x=0,this.update=function(){h.clearRect(0,0,a.width,a.height),n.x-=i*b.speed;for(var o=n.x;o<e;o+=t.width)h.drawImage(t,o,0)}};function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t){var e=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;E.apply(this,arguments),this.width=e,this.height=n,this.animationSpeed=i,this.img=t.width>this.width||t.height>this.height?new d(this):t}R.prototype=Object.create(E.prototype),R.prototype.constructor=R,R.prototype.getSprite=function(){var t={dx:this.x,dy:this.y,image:this.image};return"getFrame"in this.img?_(_({},t),this.img.getFrame(this.animationSpeed*b.speed)):t},R.prototype.update=function(){this.move(),"nextFrame"in this.img&&this.img.nextFrame()};var J=R,q=n(54),T=n.n(q),X=n(55),G=n.n(X),Y=n(56),U=n.n(Y);function z(t,e){this.bottomLine=t,this.canvasWidth=e}h.add({flyingEnemy:T.a,standingEnemy:G.a,walkingEnemy:U.a}),z.prototype={constructor:z,makeWalkingEnemy:function(){var t=h.get("walkingEnemy"),e=this.canvasWidth+b.walkingEnemyWidth,n=this.bottomLine-b.walkingEnemyHeight;return new J(t,e,n,-b.walkingEnemySpeed,0,b.walkingEnemyWidth,b.walkingEnemyHeight,b.walkingEnemyAnimationSpeed)},makeStandingEnemy:function(){var t=h.get("standingEnemy"),e=this.canvasWidth+b.standingEnemyWidth,n=this.bottomLine-b.standingEnemyHeight;return new J(t,e,n,-b.standingEnemySpeed,0,b.standingEnemyWidth,b.standingEnemyHeight)},makeFlyingEnemy:function(){var t=h.get("flyingEnemy"),e=this.canvasWidth+b.flyingEnemyWidth,n=D(0,this.bottomLine-b.flyingEnemyHeight);return new J(t,e,n,-b.flyingEnemySpeed,0,b.flyingEnemyWidth,b.flyingEnemyHeight,b.flyingEnemyAnimationSpeed)}};var N,K,Q,V,Z,$,tt,et,nt,it,ot,rt,at,ht,st,dt=z,ut=n(57),gt=n.n(ut),pt=n(58),ct=n.n(pt),mt=n(59),lt=n.n(mt),yt=n(60),ft=n.n(yt),vt=n(61),wt=n.n(vt),bt=n(62),xt=n.n(bt),Et=n(63),St=n.n(Et),kt=0,Ot=0,jt=0,Pt=0,Wt=!1,Mt=!1,Ht=0,At=0,It=b.speed;function Ct(){if(V=performance.now(),!Wt&&!Mt){for(kt+=Math.min(1,(V-Q)/1e3);kt>1/60;)kt-=1/60,Bt();!function(){K.clearRect(0,0,et,nt);for(var t=0;t<it.length;t++)_t(it[t]);Ft(at),_t(ot.getSprite()),_t(ot.getGunSprite()),Ft(st),Ft(ht),jt!=Ot&&(Pt<jt&&(Pt=jt),Z.textContent=jt,$.textContent=Pt,Ot=jt)}()}Q=V,C(Ct)}function Dt(){Mt=!0,tt.classList.toggle("hidden")}function Bt(t){ot.update();for(var e=0;e<it.length;e++)it[e].update();b.speed+=b.gameAcceleration,function(){if(performance.now()-At>b.enemyAppearanceInterval/b.speed){switch(D(1,3)){case 1:st.push(rt.makeFlyingEnemy());break;case 2:st.push(rt.makeStandingEnemy());break;case 3:st.push(rt.makeWalkingEnemy())}At=performance.now()}for(var t=0;t<st.length;t++)st[t].update(),(st[t].x<-st[t].width||st[t].y<-st[t].height)&&(st.splice(t,1),t--)}(),function(){for(var t=0;t<at.length;t++)at[t].update(),(at[t].x>et||at[t].y>nt||at[t].x<0||at[t].y<0||at[t].y>ht[0].y)&&(at.splice(t,1),t--);if(w.isClick&&performance.now()-Ht>b.shotInterval){var e=ot.gun.angle,n=ot.gun.x+Math.cos(e)*ot.gun.width,i=ot.gun.y+Math.sin(e)*ot.gun.height;at.push(new H(h.get("bullet"),n,i,Math.cos(e)*b.bulletSpeed,Math.sin(e)*b.bulletSpeed,e)),Ht=performance.now()}}(),function(){for(var t=0;t<ht.length;t++)ht[t].update();ht[0].x<=-b.platformWidth&&(ht.shift(),ht.push(new I(h.get("platform"),ht[0].x+b.platformWidth*ht.length,nt-b.platformHeight)))}(),function(){for(var t=0;t<st.length;t++)for(var e=0;e<at.length;e++)st[t].getMinDistance(at[e])<Math.max(st[t].width,st[t].height)/2+at[e].width&&(st[t].dy=-b.enemyInParadiseSpeed,st[t].dx=0,at.splice(e,1),e--,jt++);for(var n=0;n<ht.length;n++)ot.getMinDistance(ht[n])<=ot.height/2+b.platformWidth/2&&(ot.isJump=!1,ot.y=ht[n].y-ot.height,ot.dy=0);for(var i=0;i<st.length;i++)if(ot.getMinDistance(st[i])<ot.width/3+st[i].width/3)return void Dt()}()}function Ft(t){for(var e=0;e<t.length;e++)_t(t[e].getSprite())}function _t(t){if(void 0!==t){var e,n,i=t.image,o=t.sx,r=t.sy,a=t.sWidth,h=t.sHeight,s=t.dx,d=t.dy,u=t.dWidth,g=t.dHeight,p=t.angle;K.save(),void 0!==p&&(e=s,n=d,K.translate(e,n),K.rotate(p),K.translate(-e,-n)),void 0!==o?K.drawImage(i,o,r,a,h,s,d,u,g):void 0!==u?K.drawImage(i,s,d,u,g):K.drawImage(i,s,d),K.restore()}}function Lt(){Wt=!1,Mt=!1,Ht=0,At=0,(ot=new W(et,h.get("gun"),h.get("player"),0)).y=nt-b.platformHeight,st=[],at=[],ht=[],function(){for(var t=0,e=nt-b.platformHeight,n=0,i=Math.floor(et/b.platformWidth)+2;n<i;n++)ht[n]=new I(h.get("platform"),t,e),t+=b.platformWidth}(),jt=0,Q=performance.now(),b.speed=It}h.add({smoke:gt.a,sky:ct.a,city:lt.a,player:ft.a,platform:wt.a,gun:xt.a,bullet:St.a}),h.onReady((function(){var t=localStorage.getItem("maxScore");null!==t&&(Pt=t);N=document.getElementById("canvas"),K=N.getContext("2d"),Z=document.getElementById("current-score"),$=document.getElementById("max-score"),tt=document.getElementById("game-over"),$.textContent=Pt,N.width=document.documentElement.clientWidth-10,N.height=document.documentElement.clientHeight>=100?document.documentElement.clientHeight-100:document.documentElement.clientHeight,et=N.width,nt=N.height,it=[new B(h.get("smoke"),et,b.smokeBackgoundSpeed,0,nt-h.get("smoke").height),new B(h.get("sky"),et,b.skyBackgoundSpeed),new B(h.get("city"),et,b.cityBackgoundSpeed,0,nt-h.get("city").height)],rt=new dt(nt-b.platformHeight,et),Q=performance.now(),window.onbeforeunload=function(){localStorage.setItem("maxScore",Pt)},document.getElementById("exit").onclick=function(){window.close()},document.getElementById("pause").onclick=function(t){t.target.textContent=Wt?"pause":"continue",Wt=!Wt,t.target.blur()},document.getElementById("play-again").onclick=function(){tt.classList.toggle("hidden"),Lt()},document.getElementById("new-game").onclick=function(){document.getElementById("menu").classList.toggle("hidden"),Ct()},Lt()}))}});
//# sourceMappingURL=app.83f3b5a0.js.map